# 股票投资分析管理系统 - 快速启动指南

## 🚀 系统启动

### 方法一：使用交互式界面（推荐）
```bash
python3 start_system.py
```

### 方法二：直接运行主程序
```bash
python3 scripts/run_agent.py
```

### 方法三：测试系统状态
```bash
python3 tests/test_system.py
```

## 📋 系统功能

### 核心功能
- ✅ **多市场支持**：A股、美股、港股、基金
- ✅ **实时价格更新**：每5分钟自动更新
- ✅ **投资组合分析**：自动计算盈亏和风险指标
- ✅ **AI智能分析**：基本面、技术面、情感分析
- ✅ **自动报告**：每日/每周投资报告
- ✅ **预警系统**：价格变动、风险预警
- ✅ **飞书集成**：自动同步到多维表格
- ✅ **邮件通知**：交易确认和报告推送

### Agent架构
1. **MainAgent** - 主控制器
2. **DataFetchingAgent** - 数据抓取
3. **PortfolioAnalyzer** - 投资组合分析
4. **NotificationAgent** - 通知系统
5. **FeishuIntegrationAgent** - 飞书集成
6. **AIAnalysisAgent** - AI智能分析

## 🔧 配置说明

### API密钥配置
已配置的API服务：
- **Alpha Vantage**: 美股、港股数据
- **TuShare Pro**: A股数据
- **飞书开放平台**: 多维表格同步
- **Gmail**: 邮件通知

### 配置文件位置
- `config/api_keys.json` - API密钥
- `config/settings.json` - 系统设置
- `config/stock_symbols.json` - 股票代码映射

## 📊 使用示例

### 1. 启动系统
```bash
python3 start_system.py
# 选择选项 1 启动系统
```

### 2. 添加买入记录
```bash
# 在交互式界面中选择选项 3
股票代码: AAPL
股票名称: 苹果公司
市场类型: us_stocks
买入价格: 150.00
买入数量: 100
备注: 长期持有
```

### 3. 查看投资组合
```bash
# 在交互式界面中选择选项 5
# 系统自动显示：
# 总市值: ¥15,000.00
# 总成本: ¥15,000.00
# 总盈亏: ¥0.00
# 盈亏比例: 0.00%
# 持仓数量: 1
```

### 4. 运行AI分析
```bash
# 在交互式界面中选择选项 7
# 系统自动分析所有持仓并生成投资建议
```

## 🔄 自动化任务

系统已配置以下自动化任务：
- **价格更新**: 每5分钟
- **投资组合分析**: 每1小时
- **AI智能分析**: 每2小时
- **飞书数据同步**: 每30分钟
- **每日报告**: 每天18:00
- **每周报告**: 每周日18:00

## 📱 飞书集成

系统已配置飞书多维表格集成，数据将自动同步到：
- 持仓记录表
- 交易记录表
- 价格历史表
- 分析结果表

## 📧 邮件通知

系统支持以下邮件通知：
- **交易确认**: 买入/卖出确认
- **每日报告**: 投资组合摘要
- **每周报告**: 周度分析总结
- **预警通知**: 风险和价格预警
- **系统通知**: 启动和状态通知

## 🎯 下一步操作

1. **立即体验**: 运行 `python3 start_system.py` 开始使用
2. **添加持仓**: 通过交互式界面添加您的股票持仓
3. **配置飞书**: 确认飞书多维表格权限设置
4. **测试通知**: 发送测试邮件确认通知功能
5. **启用自动化**: 系统将自动开始定时任务

## 🆘 故障排除

### 常见问题
- **API限制**: 某些API服务可能需要完整安装
- **网络连接**: 确保网络连接正常
- **配置文件**: 检查JSON格式是否正确

### 系统测试
```bash
# 运行完整系统测试
python3 tests/test_system.py
```

### 查看日志
系统使用loguru记录日志，可在控制台查看详细运行信息。

---

🎉 **系统已准备就绪，立即开始使用吧！**